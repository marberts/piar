<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • piar</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://marberts.github.io/piar/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">piar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.2.9004</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/piar.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/multiple-baskets.html">Aggregating across baskets</a></li>
    <li><a class="dropdown-item" href="../articles/multiple-dimensions.html">Aggregating across dimensions</a></li>
    <li><a class="dropdown-item" href="../articles/matrix-aggregation.html">Matrix aggregation</a></li>
    <li><a class="dropdown-item" href="../articles/superlative-aggregation.html">Superlative aggregation</a></li>
    <li><a class="dropdown-item" href="../articles/subperiods.html">Aggregating over subperiods</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/marberts/piar/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/marberts/piar/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="piar-development-version">piar (development version)<a class="anchor" aria-label="anchor" href="#piar-development-version"></a></h2>
<div class="section level3">
<h3 id="improvements-development-version">Improvements<a class="anchor" aria-label="anchor" href="#improvements-development-version"></a></h3>
<ul><li><p>Both <code>aggregate(index)</code> and <code>mean(index)</code> get a new argument <code>dup_products</code> to control how product contributions are made when there are duplicate products.</p></li>
<li><p>Coercing an index or an aggregation structure to a matrix now has dimension names.</p></li>
<li><p><code><a href="../reference/expand_classification.html">expand_classification()</a></code> and <code><a href="../reference/split_classification.html">split_classification()</a></code> get a new argument <code>pad</code> to better manage unbalanced classifications.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-development-version">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-development-version"></a></h3>
<ul><li>Fixed description of how product contributions are combined across subperiods in <code><a href="../reference/mean.piar_index.html">?mean.piar_index</a></code> (<a href="https://github.com/marberts/piar/issues/51" class="external-link">#51</a>).</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.8.2" id="piar-082">piar 0.8.2<a class="anchor" aria-label="anchor" href="#piar-082"></a></h2><p class="text-muted">CRAN release: 2025-03-19</p>
<ul><li>The vignette has been re-written, split into small examples that cover more topics, and should be easier to follow.</li>
</ul><div class="section level3">
<h3 id="improvements-0-8-2">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-8-2"></a></h3>
<ul><li><p>Added <code><a href="../reference/levels.piar_index.html">set_levels()</a></code>, <code><a href="../reference/time.piar_index.html">set_time()</a></code>, and <code><a href="../reference/weights.piar_aggregation_structure.html">set_weights()</a></code> to make it easier to replace levels, times, and weights with pipes.</p></li>
<li><p><code>contrib(index) &lt;- value</code> can now be used to replace product contributions. The alias <code><a href="../reference/contrib.html">set_contrib()</a></code> is easier to use with pipes.</p></li>
<li><p><code><a href="../reference/elemental_index.html">elementary_index()</a></code> is now an alias for <code><a href="../reference/elemental_index.html">elemental_index()</a></code> as this is more common in the literature.</p></li>
<li><p><code><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate()</a></code> can now use two aggregation structures to make a superlative index.</p></li>
<li><p><code>cut(aggregation_structure)</code> can be used cut off the bottom/top of an aggregation structure. Works in conjunction with <code><a href="../reference/contrib.html">set_contrib_from_index()</a></code> to calculate index-level contributions.</p></li>
<li><p>Aggregation structures now preserve the names of their levels to work with <code><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut()</a></code>. This means that <code>as.data.frame(aggregation_structure)</code> can produce different column names.</p></li>
<li><p><code>as.data.frame(index)</code> gets an option to make a list-column of percent-change contributions. <code>as_index(data.frame)</code> gets an analogous option to add contributions in a table to an index.</p></li>
<li><p><code>as.ts(index)</code> can now be used to turn an index into a regular time series and <code>as_index(ts)</code> can turn a time series into an index object.</p></li>
<li><p><code><a href="../reference/split_classification.html">split_classification()</a></code> gives another way to generate an aggregation structure from a character vector.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-8-2">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-8-2"></a></h3>
<ul><li><p><code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> methods now respect the signature of the generic. This allows row names to be set and prevents superfluous warnings when trying to use <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code>; e.g., with <code><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv()</a></code> (<a href="https://github.com/marberts/piar/issues/34" class="external-link">#34</a>).</p></li>
<li><p>Subscripting an index object with a length 0 vector is no longer an error (<a href="https://github.com/marberts/piar/issues/48" class="external-link">#48</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.8.1" id="piar-081">piar 0.8.1<a class="anchor" aria-label="anchor" href="#piar-081"></a></h2><p class="text-muted">CRAN release: 2024-09-12</p>
<div class="section level3">
<h3 id="significant-changes-0-8-1">Significant changes<a class="anchor" aria-label="anchor" href="#significant-changes-0-8-1"></a></h3>
<ul><li>
<p><code><a href="../reference/elemental_index.html">elemental_index()</a></code>, <code><a href="../reference/price_relative.html">price_relative()</a></code>, <code><a href="../reference/impute_prices.html">shadow_price()</a></code>, <code><a href="../reference/impute_prices.html">carry_forward()</a></code>, and <code><a href="../reference/impute_prices.html">carry_backward()</a></code> now have a formula interface to select the relevant, e.g., price variables from a data frame instead of using <code><a href="https://rdrr.io/r/base/with.html" class="external-link">with()</a></code>. This changes the signature of these functions, and may break old code if argument were not named.</p>
<ul><li>
<code>as_aggregation_structure(list)</code> and <code>mean(index)</code> now require the <code>weights</code> argument to be named to be consistent with other functions.</li>
</ul></li>
<li><p>The <code>aggregate_piar_index</code> class has been removed. This class was not well thought out, and added unnecessary restrictions and complications to certain functions. In most cases this has little impact on existing code, but does mean that the few functions related to aggregate indexes have been removed.</p></li>
<li><p>The deprecated <code>cols</code> argument for <code>as_index(data.frame)</code> has been removed.</p></li>
<li><p>The default window size for <code>mean(index)</code> now covers the entire index. This makes it so that <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code> doesn’t assume an index is monthly, and makes it easier to use <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code> with the new <code><a href="https://rdrr.io/r/stats/window.html" class="external-link">window()</a></code> method for index object.</p></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-8-1">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-8-1"></a></h3>
<ul><li><p><code><a href="../reference/as_index.html">as_index()</a></code> gains a new argument <code>contrib</code> to add contributions to pre-computed indexes.</p></li>
<li><p>Added <code><a href="../reference/contrib.html">contrib2DF()</a></code> to extract percent-change contributions as a data frame.</p></li>
<li><p><code><a href="../reference/elemental_index.html">elemental_index()</a></code>, <code><a href="../reference/price_relative.html">price_relative()</a></code>, <code><a href="../reference/impute_prices.html">shadow_price()</a></code>, <code><a href="../reference/impute_prices.html">carry_forward()</a></code>, and <code><a href="../reference/impute_prices.html">carry_backward()</a></code> now require the arguments for time periods, products, and elemental aggregates to be named so as to avoid accidentally changing the order of these arguments (<a href="https://github.com/marberts/piar/issues/7" class="external-link">#7</a>, <a href="https://github.com/schneiderpy" class="external-link">@schneiderpy</a>).</p></li>
<li><p>Added <code><a href="../reference/expand_classification.html">interact_classifications()</a></code> to get the interaction of different dimensions for a hierarchical classification.</p></li>
<li><p><code><a href="../reference/chain.html">unchain()</a></code> gets an new argument <code>base</code> for better interaction with <code><a href="../reference/chain.html">chain()</a></code> and <code><a href="../reference/chain.html">rebase()</a></code>.</p></li>
<li><p><code>aggregate(index)</code> gets a new argument <code>include_ea</code> to control whether elemental indexes are returned when aggregating.</p></li>
<li><p>The <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method for indexes has been changed to simply print a summary of the index, rather than try to summarized the index values.</p></li>
<li><p><code>aggregate(index)</code> now imputes percent-change contributions for missing index values when <code>na.rm = TRUE</code>. The previously undocumented behavior was to simply drop them.</p></li>
<li><p>Added <code>window(index)</code> to extract a window of price indexes and <code>window(index) &lt;- value</code> to replace them.</p></li>
<li><p>The base period for <code><a href="../reference/chain.html">rebase()</a></code> can now be a time period specifying a new base period. This makes it easier to rebase with pipes; e.g., <code>index |&gt; mean() |&gt; rebase("202001")</code>.</p></li>
<li><p><code><a href="../reference/elemental_index.html">elemental_index()</a></code> gets a new argument <code>product</code> to better control product names.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.7.0" id="piar-070">piar 0.7.0<a class="anchor" aria-label="anchor" href="#piar-070"></a></h2><p class="text-muted">CRAN release: 2024-03-08</p>
<div class="section level3">
<h3 id="significant-changes-0-7-0">Significant changes<a class="anchor" aria-label="anchor" href="#significant-changes-0-7-0"></a></h3>
<ul><li><p>Some arguments for <code><a href="../reference/elemental_index.html">elemental_index()</a></code>, <code><a href="../reference/as_index.html">as_index()</a></code>, <code>aggregate(index)</code>, <code>mean(index)</code>, <code>vcov(index)</code>, <code>update(aggregation_structure)</code>, and <code>weights(aggregation_structure)</code> now need to be named (e.g., <code>na.rm</code>, <code>contrib</code>). This helps to unify the signatures for several functions that had similar arguments in different positions. In all cases these are arguments that are not near the beginning of the function and should have probably been named anyways.</p></li>
<li><p>There are several bug fixes in this version that make non-backwards compatible changes.</p></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-7-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-7-0"></a></h3>
<ul><li><p>Added examples for finding imputed index values to the vignette.</p></li>
<li><p><code><a href="../reference/contrib.html">contrib()</a></code> gets a new argument <code>period</code> to control which time periods get included in the contributions matrix (as documented).</p></li>
<li><p><code><a href="../reference/contrib.html">contrib()</a></code> gets a new argument <code>pad</code> to control how the contributions matrix is padded when products differ over time.</p></li>
<li><p>Added <code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code> and <code><a href="https://rdrr.io/r/base/NA.html" class="external-link">anyNA()</a></code> methods to find missing values in an index object.</p></li>
<li><p><code>index[i] &lt;- value</code> now works when <code>i</code> is a matrix.</p></li>
<li><p><code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code> gets a new argument <code>contrib</code> to control if product contributions are aggregated over subperiods.</p></li>
<li><p>Added a <code><a href="https://rdrr.io/r/base/split.html" class="external-link">split()</a></code> method for index objects.</p></li>
<li><p><code>levels(aggregation_structure)</code> now returns a list of levels to denote the position of each level in the hierarchy. Use <code><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist()</a></code> to get the old behavior.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-7-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-7-0"></a></h3>
<ul><li><p>The default for <code>ea_only</code> has changed to <code>TRUE</code> when calling <code>weights(aggregation_structure)</code> to fix a bug with the replacement method.</p></li>
<li><p>Replacing an index value with <code>index[] &lt;- value</code> when <code>value</code> is also an index object now works correctly when <code>value</code> is recycled.</p></li>
<li><p>Setting <code>stringsAsFactors = TRUE</code> in <code>as.data.frame(index)</code> now keeps the correct ordering of the factor levels.</p></li>
<li><p><code>mean(index)</code> no longer returns an aggregate index when <code>r</code> differs from that used to make <code>index</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecations-0-7-0">Deprecations<a class="anchor" aria-label="anchor" href="#deprecations-0-7-0"></a></h3>
<ul><li>The <code>cols</code> argument for <code><a href="../reference/as_index.html">as_index()</a></code> is deprecated and will be removed in a future version.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.6.0" id="piar-060">piar 0.6.0<a class="anchor" aria-label="anchor" href="#piar-060"></a></h2><p class="text-muted">CRAN release: 2023-11-19</p>
<div class="section level3">
<h3 id="significant-changes-0-6-0">Significant changes<a class="anchor" aria-label="anchor" href="#significant-changes-0-6-0"></a></h3>
<ul><li><p>The <code>[[</code> method for index objects has been removed as it created unexpected problems for little gain. <code>as.matrix(index)[[1, 1]]</code> is a more explicit and flexible way to get the same behavior as <code>index[[1, 1]]</code>.</p></li>
<li><p><code><a href="../reference/aggregation_structure.html">aggregation_structure()</a></code> now orders the levels of an aggregation according to the order they appear in the data. Previously the levels were ordered lexicographically, except for the elemental aggregates. This can affect the order in which index values appear for an aggregate index.</p></li>
</ul><p>There are a number of changes to the way product names are handled when making an index and extracting percent-change contributions.</p>
<ul><li>
<p>Names for price relatives now need to be unique within a time period for <code><a href="../reference/elemental_index.html">elemental_index()</a></code>. The previous (undocumented) behavior was to only require that names be unique within a time period <em>and</em> elemental aggregate. This implies two non-backward compatible changes.</p>
<ul><li><p>The default product names for <code><a href="../reference/elemental_index.html">elemental_index()</a></code> now include the name of the elemental aggregate to conform to the above requirement.</p></li>
<li><p>Percent-change contributions from <code><a href="../reference/contrib.html">contrib()</a></code> have simplified row names, as there is now no need to include index-level names to make product names unique.</p></li>
</ul></li>
<li><p><code><a href="../reference/contrib.html">contrib()</a></code> now always returns a matrix. Previously it would return <code>NULL</code> if there were no contributions for each level of the index.</p></li>
<li><p>Rows for the contributions matrix are ordered according to product names so that they have a consistent ordering.</p></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-6-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-6-0"></a></h3>
<ul><li><p>Printing an index gives a textual description in addition to the matrix of index values. Printing an aggregation structure now gives a description and tabular representation instead of a list.</p></li>
<li><p>There are now methods to set the levels and time periods of an index.</p></li>
<li><p>Methods for index objects are now faster for larger indexes.</p></li>
<li><p><code><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate()</a></code> gains a new argument <code>contrib</code> that controls if percent-change contributions for elemental indexes are aggregated. The default maintains the current behavior of aggregating contributions if there are any.</p></li>
<li><p>The class names for index objects have changed to fix a name conflict with <code>Matrix</code>. This means it’s now possible to use <code>rsmatrix</code> with <code>piar</code>.</p></li>
<li><p>The <code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix()</a></code> method for aggregation structures gains a new argument <code>sparse</code>. If <code>sparse = TRUE</code> then the aggregation matrix is a sparse, rather than dense, matrix. This option can also be used in the <code><a href="https://rdrr.io/r/stats/vcov.html" class="external-link">vcov()</a></code> method for aggregate price indexes to improve performance for large indexes.</p></li>
<li><p>Added the <code>carry_backwards()</code> function to do carry backwards (as opposed to carry forwards) imputation.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-6-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-6-0"></a></h3>
<ul><li><p>Viewing index objects in the RStudio viewer longer gives an error.</p></li>
<li><p><code><a href="../reference/is_index.html">is_direct_index()</a></code> is now exported.</p></li>
<li><p>Replacing index values for an aggregate index no longer returns an aggregate index, as it may not be consistent in aggregation.</p></li>
<li><p>Stacking two indexes now only returns an aggregate index if both indexes are themselves aggregate indexes. Previously it was possible to stack an aggregate index with a non-aggregate index to produce an aggregate index that was not consistent in aggregation.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.5.0" id="piar-050">piar 0.5.0<a class="anchor" aria-label="anchor" href="#piar-050"></a></h2><p class="text-muted">CRAN release: 2023-08-10</p>
<div class="section level3">
<h3 id="significant-changes-0-5-0">Significant changes<a class="anchor" aria-label="anchor" href="#significant-changes-0-5-0"></a></h3>
<ul><li><p><code>piar</code> now requires <strong>R</strong> &gt;= 4.0.</p></li>
<li><p><code>is_chain_index()</code> has been removed; use <code><a href="../reference/is_index.html">is_chainable_index()</a></code> instead.</p></li>
<li><p>The first argument to <code><a href="../reference/elemental_index.html">elemental_index()</a></code> is now <code>x</code>, not <code>rel</code>, to be consistent with the rest of the functions. Similarly, the first argument for <code><a href="../reference/expand_classification.html">expand_classification()</a></code> is now <code>x</code>, not <code>class</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-5-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-5-0"></a></h3>
<ul><li><p>New functions <code><a href="../reference/as_aggregation_structure.html">as_aggregation_structure()</a></code> and <code><a href="../reference/is_aggregation_structure.html">is_aggregation_structure()</a></code> to coerce (usually) tabular data for aggregation weights into an aggregation structure, and test if an object is an aggregation structure.</p></li>
<li><p>A method for <code>[[</code> for index objects to extract or replace a single index value.</p></li>
<li><p>The weights for an aggregation structure can be replace with <code>weights(pias) &lt;- vector</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-5-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-5-0"></a></h3>
<ul><li><p>The <code><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels()</a></code> replacement function now gives an error for indexes and aggregation structures, rather than adding a levels attribute that does nothing.</p></li>
<li><p>The <code>width</code> argument for <code><a href="../reference/expand_classification.html">expand_classification()</a></code> now recycles a single value.</p></li>
<li><p>Major overhaul of the documentation should make it easier to use.</p></li>
<li><p>The object structure used to represent index object has been refined.</p></li>
<li><p>Subscripting an index object is now much faster.</p></li>
<li><p>It is now possible to update an aggregation structure with a non-aggregated index.</p></li>
<li><p>Functions that accept a price index or an aggregation structure as an argument now attempt to coerce these arguments into an index object or aggregation structure object instead of throwing an error.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-5-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-5-0"></a></h3>
<ul><li><p>Fixed a bug where creating elemental indexes with missing product names could produce a contributions matrix with the wrong number of products.</p></li>
<li><p>It is now possible to chain an index with only one level.</p></li>
<li><p>Subscripting an index with <code>NA</code>s or duplicate indices is no longer allowed.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.0" id="piar-040">piar 0.4.0<a class="anchor" aria-label="anchor" href="#piar-040"></a></h2><p class="text-muted">CRAN release: 2022-04-30</p>
<div class="section level3">
<h3 id="significant-changes-0-4-0">Significant changes<a class="anchor" aria-label="anchor" href="#significant-changes-0-4-0"></a></h3>
<ul><li><p>The <code><a href="https://rdrr.io/r/stats/vcov.html" class="external-link">vcov()</a></code> method for aggregate indexes now returns a matrix of variances instead of an array of covariances, as the covariances are usually misleading and unnecessary. In most cases elemental aggregates are sampled independently, in which case the covariances should be 0. This is not backwards compatible.</p></li>
<li><p>The <code><a href="https://rdrr.io/r/stats/vcov.html" class="external-link">vcov()</a></code> method for aggregate indexes is now much faster. The options for parallel computing have been removed, as they’re unlikely to be useful for even large indexes.</p></li>
<li><p>The <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code> and <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail()</a></code> methods for index objects now return an index object instead of a matrix, as documented.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-4-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-4-0"></a></h3>
<ul><li><p>Added an <code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix()</a></code> method for pias objects. This makes it easy to aggregate a price index as a matrix operation; just matrix multiply the aggregation matrix with the elemental indexes.</p></li>
<li><p>Added an <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> method for pias objects. This is useful for writing price-updated weights with, e.g., <code><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv()</a></code>.</p></li>
<li><p>Added an <code><a href="../reference/as_index.html">as_index()</a></code> method for data frames. This is faster and simpler than turning a data frame into an index with <code>elemental_index(df$value, df$period, df$level)</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-4-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-4-0"></a></h3>
<ul><li><p>The <code>chain</code> argument found in some of the methods for <code><a href="../reference/elemental_index.html">elemental_index()</a></code> and <code><a href="../reference/as_index.html">as_index()</a></code> to mark an index as chainable has been replaced by the more descriptive <code>chainable</code> argument. Partial matching of argument names means this is backwards compatible.</p></li>
<li><p>The <code><a href="../reference/price_relative.html">price_relative()</a></code> function no longer uses <code>gpindex::back_price()</code>, as this function is deprecated. This change will remove the harmless deprecation warning when using an older version of piar with a newer version of gpindex.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-functions-0-4-0">Deprecated functions<a class="anchor" aria-label="anchor" href="#deprecated-functions-0-4-0"></a></h3>
<ul><li>The <code>is_chain_index()</code> function is now deprecated, and replaced with the <code><a href="../reference/is_index.html">is_chainable_index()</a></code> function.</li>
</ul></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steve Martin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

