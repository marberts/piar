<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • piar</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://marberts/github.io/piar/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">piar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0.9009</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/piar.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/marberts/piar/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/marberts/piar/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.8.0" id="version-080">Version 0.8.0<a class="anchor" aria-label="anchor" href="#version-080"></a></h2>
<div class="section level3">
<h3 id="significant-changes-0-8-0">Significant changes<a class="anchor" aria-label="anchor" href="#significant-changes-0-8-0"></a></h3>
<ul><li><p>There is no longer a class representing aggregated indexes. This class was not well thought out, and added unnecessary restrictions and complications to certain functions. In most cases this has little impact on existing code, but does mean that the few functions related to aggregate indexes have been removed.</p></li>
<li><p>The deprecated <code>cols</code> argument for <code>as_index(data.frame)</code> has been removed.</p></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-8-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-8-0"></a></h3>
<ul><li><p>Added <code><a href="../reference/expand_classification.html">interact_classifications()</a></code> to get the interaction of different dimensions for a hierarchical classification.</p></li>
<li><p><code><a href="../reference/chain.html">unchain()</a></code> gets an new argument <code>base</code> for better interaction with <code><a href="../reference/chain.html">chain()</a></code> and <code><a href="../reference/chain.html">rebase()</a></code>.</p></li>
<li><p><code>aggregate(index)</code> gets a new argument <code>include_ea</code> to control whether elemental indexes are returned when aggregating.</p></li>
<li><p>The <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method for indexes has been changed to simply print a summary of the index, rather than try to summarized the index values.</p></li>
<li><p><code><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate()</a></code> now imputes percent-change contributions for missing index values when <code>na.rm = TRUE</code>. The previously undocumented behavior was to simply drop them.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.7.0" id="version-070">Version 0.7.0<a class="anchor" aria-label="anchor" href="#version-070"></a></h2><p class="text-muted">CRAN release: 2024-03-08</p>
<div class="section level3">
<h3 id="significant-changes-0-7-0">Significant changes<a class="anchor" aria-label="anchor" href="#significant-changes-0-7-0"></a></h3>
<ul><li><p>Some arguments for <code><a href="../reference/elemental_index.html">elemental_index()</a></code>, <code><a href="../reference/as_index.html">as_index()</a></code>, <code>aggregate(index)</code>, <code>mean(index)</code>, <code>vcov(index)</code>, <code>update(aggregation_structure)</code>, and <code>weights(aggregation_structure)</code> now need to be named (e.g., <code>na.rm</code>, <code>contrib</code>). This helps to unify the signatures for several functions that had similar arguments in different positions. In all cases these are arguments that are not near the beginning of the function and should have probably been named anyways.</p></li>
<li><p>There are several bug fixes in this version that make non-backwards compatible changes.</p></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-7-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-7-0"></a></h3>
<ul><li><p>Added examples for finding imputed index values to the vignette.</p></li>
<li><p><code><a href="../reference/contrib.html">contrib()</a></code> gets a new argument <code>period</code> to control which time periods get included in the contributions matrix (as documented).</p></li>
<li><p><code><a href="../reference/contrib.html">contrib()</a></code> gets a new argument <code>pad</code> to control how the contributions matrix is padded when products differ over time.</p></li>
<li><p>Added <code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code> and <code><a href="https://rdrr.io/r/base/NA.html" class="external-link">anyNA()</a></code> methods to find missing values in an index object.</p></li>
<li><p><code>index[i] &lt;- value</code> now works when <code>i</code> is a matrix.</p></li>
<li><p><code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code> gets a new argument <code>contrib</code> to control if product contributions are aggregated over subperiods.</p></li>
<li><p>Added a <code><a href="https://rdrr.io/r/base/split.html" class="external-link">split()</a></code> method for index objects.</p></li>
<li><p><code>levels(aggregation_structure)</code> now returns a list of levels to denote the position of each level in the hierarchy. Use <code><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist()</a></code> to get the old behavior.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-7-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-7-0"></a></h3>
<ul><li><p>The default for <code>ea_only</code> has changed to <code>TRUE</code> when calling <code>weights(aggregation_structure)</code> to fix a bug with the replacement method.</p></li>
<li><p>Replacing an index value with <code>index[] &lt;- value</code> when <code>value</code> is also an index object now works correctly when <code>value</code> is recycled.</p></li>
<li><p>Setting <code>stringsAsFactors = TRUE</code> in <code>as.data.frame(index)</code> now keeps the correct ordering of the factor levels.</p></li>
<li><p><code>mean(index)</code> no longer returns an aggregate index when <code>r</code> differs from that used to make <code>index</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecations-0-7-0">Deprecations<a class="anchor" aria-label="anchor" href="#deprecations-0-7-0"></a></h3>
<ul><li>The <code>cols</code> argument for <code><a href="../reference/as_index.html">as_index()</a></code> is deprecated and will be removed in a future version.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.6.0" id="version-060">Version 0.6.0<a class="anchor" aria-label="anchor" href="#version-060"></a></h2><p class="text-muted">CRAN release: 2023-11-19</p>
<div class="section level3">
<h3 id="significant-changes-0-6-0">Significant changes<a class="anchor" aria-label="anchor" href="#significant-changes-0-6-0"></a></h3>
<ul><li><p>The <code>[[</code> method for index objects has been removed as it created unexpected problems for little gain. <code>as.matrix(index)[[1, 1]]</code> is a more explicit and flexible way to get the same behavior as <code>index[[1, 1]]</code>.</p></li>
<li><p><code><a href="../reference/aggregation_structure.html">aggregation_structure()</a></code> now orders the levels of an aggregation according to the order they appear in the data. Previously the levels were ordered lexicographically, except for the elemental aggregates. This can affect the order in which index values appear for an aggregate index.</p></li>
</ul><p>There are a number of changes to the way product names are handled when making an index and extracting percent-change contributions.</p>
<ul><li>
<p>Names for price relatives now need to be unique within a time period for <code><a href="../reference/elemental_index.html">elemental_index()</a></code>. The previous (undocumented) behavior was to only require that names be unique within a time period <em>and</em> elemental aggregate. This implies two non-backward compatible changes.</p>
<ul><li><p>The default product names for <code><a href="../reference/elemental_index.html">elemental_index()</a></code> now include the name of the elemental aggregate to conform to the above requirement.</p></li>
<li><p>Percent-change contributions from <code><a href="../reference/contrib.html">contrib()</a></code> have simplified row names, as there is now no need to include index-level names to make product names unique.</p></li>
</ul></li>
<li><p><code><a href="../reference/contrib.html">contrib()</a></code> now always returns a matrix. Previously it would return <code>NULL</code> if there were no contributions for each level of the index.</p></li>
<li><p>Rows for the contributions matrix are ordered according to product names so that they have a consistent ordering.</p></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-6-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-6-0"></a></h3>
<ul><li><p>Printing an index gives a textual description in addition to the matrix of index values. Printing an aggregation structure now gives a description and tabular representation instead of a list.</p></li>
<li><p>There are now methods to set the levels and time periods of an index.</p></li>
<li><p>Methods for index objects are now faster for larger indexes.</p></li>
<li><p><code><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate()</a></code> gains a new argument <code>contrib</code> that controls if percent-change contributions for elemental indexes are aggregated. The default maintains the current behavior of aggregating contributions if there are any.</p></li>
<li><p>The class names for index objects have changed to fix a name conflict with <code>Matrix</code>. This means it’s now possible to use <code>rsmatrix</code> with <code>piar</code>.</p></li>
<li><p>The <code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix()</a></code> method for aggregation structures gains a new argument <code>sparse</code>. If <code>sparse = TRUE</code> then the aggregation matrix is a sparse, rather than dense, matrix. This option can also be used in the <code><a href="https://rdrr.io/r/stats/vcov.html" class="external-link">vcov()</a></code> method for aggregate price indexes to improve performance for large indexes.</p></li>
<li><p>Added the <code><a href="../reference/impute_prices.html">carry_backwards()</a></code> function to do carry backwards (as opposed to carry forwards) imputation.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-6-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-6-0"></a></h3>
<ul><li><p>Viewing index objects in the RStudio viewer longer gives an error.</p></li>
<li><p><code><a href="../reference/is_index.html">is_direct_index()</a></code> is now exported.</p></li>
<li><p>Replacing index values for an aggregate index no longer returns an aggregate index, as it may not be consistent in aggregation.</p></li>
<li><p>Stacking two indexes now only returns an aggregate index if both indexes are themselves aggregate indexes. Previously it was possible to stack an aggregate index with a non-aggregate index to produce an aggregate index that was not consistent in aggregation.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.5.0" id="version-050">Version 0.5.0<a class="anchor" aria-label="anchor" href="#version-050"></a></h2><p class="text-muted">CRAN release: 2023-08-10</p>
<div class="section level3">
<h3 id="significant-changes-0-5-0">Significant changes<a class="anchor" aria-label="anchor" href="#significant-changes-0-5-0"></a></h3>
<ul><li><p><code>piar</code> now requires <strong>R</strong> &gt;= 4.0.</p></li>
<li><p><code>is_chain_index()</code> has been removed; use <code><a href="../reference/is_index.html">is_chainable_index()</a></code> instead.</p></li>
<li><p>The first argument to <code><a href="../reference/elemental_index.html">elemental_index()</a></code> is now <code>x</code>, not <code>rel</code>, to be consistent with the rest of the functions. Similarly, the first argument for <code><a href="../reference/expand_classification.html">expand_classification()</a></code> is now <code>x</code>, not <code>class</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-5-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-5-0"></a></h3>
<ul><li><p>New functions <code><a href="../reference/as_aggregation_structure.html">as_aggregation_structure()</a></code> and <code><a href="../reference/is_aggregation_structure.html">is_aggregation_structure()</a></code> to coerce (usually) tabular data for aggregation weights into an aggregation structure, and test if an object is an aggregation structure.</p></li>
<li><p>A method for <code>[[</code> for index objects to extract or replace a single index value.</p></li>
<li><p>The weights for an aggregation structure can be replace with <code>weights(pias) &lt;- vector</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-5-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-5-0"></a></h3>
<ul><li><p>The <code><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels()</a></code> replacement function now gives an error for indexes and aggregation structures, rather than adding a levels attribute that does nothing.</p></li>
<li><p>The <code>width</code> argument for <code><a href="../reference/expand_classification.html">expand_classification()</a></code> now recycles a single value.</p></li>
<li><p>Major overhaul of the documentation should make it easier to use.</p></li>
<li><p>The object structure used to represent index object has been refined.</p></li>
<li><p>Subscripting an index object is now much faster.</p></li>
<li><p>It is now possible to update an aggregation structure with a non-aggregated index.</p></li>
<li><p>Functions that accept a price index or an aggregation structure as an argument now attempt to coerce these arguments into an index object or aggregation structure object instead of throwing an error.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-5-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-5-0"></a></h3>
<ul><li><p>Fixed a bug where creating elemental indexes with missing product names could produce a contributions matrix with the wrong number of products.</p></li>
<li><p>It is now possible to chain an index with only one level.</p></li>
<li><p>Subscripting an index with <code>NA</code>s or duplicate indices is no longer allowed.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.0" id="version-040">Version 0.4.0<a class="anchor" aria-label="anchor" href="#version-040"></a></h2><p class="text-muted">CRAN release: 2022-04-30</p>
<div class="section level3">
<h3 id="significant-changes-0-4-0">Significant changes<a class="anchor" aria-label="anchor" href="#significant-changes-0-4-0"></a></h3>
<ul><li><p>The <code><a href="https://rdrr.io/r/stats/vcov.html" class="external-link">vcov()</a></code> method for aggregate indexes now returns a matrix of variances instead of an array of covariances, as the covariances are usually misleading and unnecessary. In most cases elemental aggregates are sampled independently, in which case the covariances should be 0. This is not backwards compatible.</p></li>
<li><p>The <code><a href="https://rdrr.io/r/stats/vcov.html" class="external-link">vcov()</a></code> method for aggregate indexes is now much faster. The options for parallel computing have been removed, as they’re unlikely to be useful for even large indexes.</p></li>
<li><p>The <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code> and <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail()</a></code> methods for index objects now return an index object instead of a matrix, as documented.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-4-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-4-0"></a></h3>
<ul><li><p>Added an <code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix()</a></code> method for pias objects. This makes it easy to aggregate a price index as a matrix operation; just matrix multiply the aggregation matrix with the elemental indexes.</p></li>
<li><p>Added an <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> method for pias objects. This is useful for writing price-updated weights with, e.g., <code><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv()</a></code>.</p></li>
<li><p>Added an <code><a href="../reference/as_index.html">as_index()</a></code> method for data frames. This is faster and simpler than turning a data frame into an index with <code>elemental_index(df$value, df$period, df$level)</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-4-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-4-0"></a></h3>
<ul><li><p>The <code>chain</code> argument found in some of the methods for <code><a href="../reference/elemental_index.html">elemental_index()</a></code> and <code><a href="../reference/as_index.html">as_index()</a></code> to mark an index as chainable has been replaced by the more descriptive <code>chainable</code> argument. Partial matching of argument names means this is backwards compatible.</p></li>
<li><p>The <code><a href="../reference/price_relative.html">price_relative()</a></code> function no longer uses <code>gpindex::back_price()</code>, as this function is deprecated. This change will remove the harmless deprecation warning when using an older version of piar with a newer version of gpindex.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-functions-0-4-0">Deprecated functions<a class="anchor" aria-label="anchor" href="#deprecated-functions-0-4-0"></a></h3>
<ul><li>The <code>is_chain_index()</code> function is now deprecated, and replaced with the <code><a href="../reference/is_index.html">is_chainable_index()</a></code> function.</li>
</ul></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Steve Martin.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

